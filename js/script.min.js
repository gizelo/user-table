let users=[],newUser={};const usersTable=document.querySelector(".users-table__body"),userModal=document.querySelector(".modal-bg"),userModalContent=document.querySelector(".newUserForm"),userModalTitle=document.querySelector(".user-modal__header__title"),userModalFooter=document.querySelector(".user-modal__footer");function fillTable(){const e=users.map((e,s)=>createUser(s));usersTable.innerHTML=e.join(" ")}function createUser(e){return`\n    <tr class="users-table__body__row">\n        <td class="users-table__body__cell">\n            <button onclick="viewUser(${e})"\n                    class="btn"\n            >\n                <i class="far fa-eye"></i>\n            </button>\n        </td>\n        <td class="users-table__body__cell">${users[e].name}</td>\n        <td class="users-table__body__cell">${users[e].username}</td>\n        <td class="users-table__body__cell">${users[e].email}</td>\n        <td class="users-table__body__cell">${users[e].website}</td>\n        <td class="users-table__body__cell">\n            <button onclick="deleteUser(${e})"\n                    class="btn"\n            >\n                <i class="fas fa-trash"></i>\n            </button>\n        </td>\n    </tr>\n    `}function sortUsers(e){let s=[];users.forEach(n=>{s.push(n[e])});for(let s=0;s<users.length;s++)for(let n=s;n<users.length;n++)if(users[s][e]>users[n][e]){let e=users[s];users[s]=users[n],users[n]=e}let n=[];users.forEach(s=>{n.push(s[e])});for(let e=0;e<n.length;e++)if(n[e]!==s[e])return void fillTable();for(let s=0;s<users.length;s++)for(let n=s;n<users.length;n++)if(users[s][e]<users[n][e]){let e=users[s];users[s]=users[n],users[n]=e}fillTable()}function deleteUser(e){let s=[];for(let n=0;n<users.length;n++)n!==e&&s.push(users[n]);users=s,fillTable()}function createNewUser(){for(const e in users[0])users[0].hasOwnProperty(e)&&(newUser[e]="")}function openNewUserModal(){for(const e in newUser)newUser[e]="";let e=[];for(const s in newUser)newUser.hasOwnProperty(s)&&("id"===s?e.push(`\n                <div class="user-modal__content__field">\n                    <span class="user-modal__content__field-name">${s}: </span>\n                    <input type="number"\n                           class="user-modal__content__field-input"\n                    >\n                </div>\n                `):e.push(`\n                <div class="user-modal__content__field">\n                    <span class="user-modal__content__field-name">${s}: </span>\n                    <input type="text"\n                           class="user-modal__content__field-input"\n                    >\n                </div>\n                `));userModalContent.innerHTML=e.join(" "),userModalTitle.textContent="New user",userModalFooter.style.display="block",userModal.style.display="block"}function saveUser(){let e={},s=0;for(const n in newUser){if(""===userModalContent[s].value.trim())return void alert("Fill in all the fields, please");e[n]=userModalContent[s].value,s++}users.push(e),fillTable(),closeUserModal()}function viewUser(e){let s=[];for(const n in users[e])users[e].hasOwnProperty(n)&&s.push(createUserField(users[e][n],n));userModalContent.innerHTML=s.join(" "),userModalTitle.textContent="User #"+e,userModal.style.display="block"}function createUserField(e,s,n){if("object"==typeof e){const n=`\n            <div class="user-modal__content__field">\n                <p class="user-modal__content__field-text">\n                    <span class="user-modal__content__field-name">${s.toUpperCase()}: </span>\n                </p>\n            </div>\n        `;let t=[];for(const s in e)e.hasOwnProperty(s)&&t.push(createUserField(e[s],s,!0));return n+t.join(" ")}return n?`\n        <div class="user-modal__content__field">\n            <p class="user-modal__content__field-text">\n                <span class="user-modal__content__field-name">- ${s}: </span>\n                ${e}\n            </p>\n        </div>\n    `:`\n        <div class="user-modal__content__field">\n            <p class="user-modal__content__field-text">\n                <span class="user-modal__content__field-name">${s}: </span>\n                ${e}\n            </p>\n        </div>\n    `}function closeUserModal(){userModalFooter.style.display="none",userModal.style.display="none"}userModal.style.display="none",userModalFooter.style.display="none",fetch("https://jsonplaceholder.typicode.com/users").then(e=>e.json()).then(e=>{users=e,createNewUser(),fillTable()});